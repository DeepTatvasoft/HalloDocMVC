@model Services.ViewModels.NewStateData
<div class="table-responsive text-white mt-3">
    <table class="table" id="maintable">
        <thead>
            <tr>
                <th scope="col" class="d-none"></th>
                <th scope="col">Name</th>
                <th scope="col"> </th>
                <th scope="col">Date Of Birth</th>
                <th scope="col">Requestor</th>
                <th scope="col">Requested Date</th>
                <th scope="col">Phone</th>
                <th scope="col">Address</th>
                <th scope="col">Notes</th>
                <th scope="col">Chat With</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody style="--bs-table-color: white;" id="myTable">
            @foreach (var obj in Model.req)
            {
                var reqclient = obj.Requestclients.ElementAt(0);
                var color = "mediumpurple";
                var type = "";
                @if (obj.Requesttypeid == 1)
                {
                    color = "rgb(72 169 70)";
                    type = "Patient";
                }
                else if (obj.Requesttypeid == 2)
                {
                    color = "#f5a33e";
                    type = "Family";
                }
                else if (obj.Requesttypeid == 4)
                {
                    color = "hotpink";
                    type = "Business";
                }
                else if (obj.Requesttypeid == 3)
                {
                    color = "dodgerblue";
                    type = "Concierge";
                }
                <tr style="--bs-table-bg:@color">
                    <td scope="row" class="d-none">@obj.Requesttypeid</td>
                    <td scope="row">@obj.Firstname, @obj.Lastname</td>
                    <td scope="row">
                        <button type="button" class="btn btn-outline-light"><i class="fa-regular fa-envelope"></i></button>
                    </td>
                    <td>@reqclient.Strmonth-@reqclient.Intdate-@reqclient.Intyear</td>
                    <td>@reqclient.Firstname , @reqclient.Lastname</td>
                    <td>@obj.Createddate</td>
                    <td>
                        <div class="phone">@obj.Phonenumber</div>
                        (Patient)
                        @if (type != "Patient")
                        {
                            <div class="phone">@reqclient.Phonenumber</div>
                            <span>(@type)</span>
                        }
                    </td>
                    <td>@reqclient.Address</td>
                    <td>@reqclient.Notes</td>
                    <td>
                        <button class="btn btn-outline-light"><i class="bi bi-person me-1"></i>Provider</button>
                    </td>
                    <td>
                        <div class="dropdown ms-2">
                            <button class="btn btn-outline-light" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Actions
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item text-secondary"><i class="fa-regular fa-rectangle-list me-2"></i>Assign case</a></li>
                                <li><a class="dropdown-item text-secondary"><i class="fa-regular fa-circle-xmark me-2"></i>Cancel case</a></li>
                                <li><a class="dropdown-item text-secondary" asp-controller="Admin" asp-action="ViewCase" asp-route-id="@obj.Requestid"><i class="bi bi-view-list me-2"></i>View case</a></li>
                                <li>
                                    <a class="dropdown-item text-secondary" href="#">
                                        <i class="fa-solid fa-book-journal-whills me-2"></i>View Notes
                                    </a>
                                </li>
                                <li><a class="dropdown-item text-secondary" href="#"><i class="fa-solid fa-ban me-2"></i>Block Patients</a></li>
                            </ul>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
